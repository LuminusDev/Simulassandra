\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage[tikz]{bclogo}
\usepackage{geometry}
\usepackage{array}
\usepackage{pgfgantt}
\usepackage{url}
\bibliographystyle{alpha}
\usepackage[counterclockwise]{rotating}
\geometry{hmargin=2.5cm,vmargin=1.5cm}

\setlength{\parskip}{1ex plus 2ex minus 1ex}
\newcolumntype{M}[1]{
    >{\raggedright}m{#1}
}

\newcommand{\besoin}[2] {
  (\textit{Priorité} : #1, \textit{criticité} : #2)
}

\title{
 \begin{minipage}\linewidth
        \centering
        Simulation d'algorithmes d'équilibrage de charge dans un environnement distribué 
        \vskip3pt
        \large Identifications des besoins
    \end{minipage}
 }
 
\bibliographystyle{alpha}
\author{Kevin Barreau \and Guillaume Marques \and Corentin Salingue}

\begin{document}

\maketitle

\abstract
Dans une première partie, nous présentons le projet, le contexte et les hyothèses. Ensuite, nous développons les besoins fonctionnels et les besoins non-fonctionnels.
De plus, nous dégageons une première version de la plannification du projet (GANTT). Enfin, nous présentons les livrables.



\newpage


\renewcommand{\contentsname}{Sommaire} 
\tableofcontents



\newpage

\section{Définition du projet}

\subsection{Contexte}

\paragraph{Définition} Un environnement distribué est constitué de plusieurs machines (ordinateurs), appelées \textit{noeuds}, sur lesquelles sont stockées des données.

\paragraph{} L'expansion, au cours des deux dernières décennies, des réseaux et notamment d'Internet a engendré une importante création de données, massives par leur nombre et leur taille.
Stocker ces informations sur un seul point de stockage (ordinateur par exemple) n'est bien sûr plus envisageable, que ce soit pour des raisons techniques ou pour des raisons de sûreté (pannes potentielles par exemple).
Pour cela des systèmes de stockages dits distribués sont utilisés en pratique afin des les répartir sur différentes unités de stockages.

\paragraph{} %Diff BD et BD distrib et maitre esclave (faire, apparaitre file d'attente & def charge )

\paragraph{Définition} Une donnée est un codage d'une information propre au système de base de données.

\paragraph{Définition} Une requête est une interrogation d'une base de données afin de récupérer ou modifier de l'information sur des données.

\paragraph{Définition} Une \textit{charge} est associée à un noeud et désigne le nombre de requêtes que le noeud doit traiter. 

\paragraph{Définition} La réplication d'une donnée consiste à faire des copies de cette donnée sur d'autres noeuds.

\paragraph{} Pour répartir toutes ces données, notre client a développé de nouveaux algorithmes d'équilibrage de charge basés sur la réplication qu'il souhaite tester dans un environnement distribué.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{1cm}
\textbf{A bien placer} : 
\paragraph{} Un noeud est une machine (ordinateur généralement) pouvant stocker des données et traiter des requêtes. Un noeud possède des données locales propres au fonctionnement du noeud.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Finalité}

\paragraph{} Nous devons développer une solution logicielle permettant de tester ces nouveaux algorithmes d'équilibrage de charge et de réplication dans un environnement distribué.

%\paragraph{Définition} Un réseau est un ensemble de noeuds qui sont reliés entre eux (par exemple par Internet) et qui communiquent ensemble afin de traiter toutes les requêtes reçues.

%\paragraph{Définition} La topologie d'un réseau représente l'architecture logicielle des liens entre les noeuds.

\paragraph{}Il s'agira d'implémenter les algorithmes développés par le client.
On distingue les algorithmes d'affectation de requête :

\begin{itemize}
 \item \textbf{SLVO} 
    Si la charge du noeud est inférieure ou égale à la charge minimum, il s'affecte toutes les requêtes en attente et en avertit les autres noeuds.
 \item \textbf{AverageDegree}
    Si la charge du noeud est inférieure ou égale à la charge moyenne, il s'affecte toutes les requêtes en attente et en avertit les autres noeuds.
\end{itemize}

Ainsi que l'algorithme de gestion de copie, permettant d'établir le nombre de réplicats d'un objet en fonction de sa popularité.

\paragraph{} Pour comparer l'efficacité de ces algorithmes, on peut visualiser l'état du réseau \textit{à tout moment}.


\subsection{Hypothèses}

\paragraph{} Nous évoluerons dans un environnement distribué constitué de $n$ noeuds de stockage dans lequel on souhaite stocker $m$ objets. C'est un réseau statique, on ne peut pas ajouter ou supprimer de noeuds après création du réseau.

\paragraph{Données locales d'un noeud} Un noeud contient les données locales suivantes :
\begin{itemize}
 \item la charge de tous les noeuds du réseau
 \item la popularité de chaque objet stocké sur ce noeud
 \item une file d'attente de message à traiter
 \item la requête en cours de traitement
\end{itemize}

\paragraph{Requêtes} Nous supposerons que les requêtes seront effectuées en un temps fixe.

%\newpage
\section{Hiérarchisation des besoins}

\paragraph{} Nous avons dégagé des précédentes réunions, une liste de besoins fonctionnels et non-fonctionnels. 
Pour mieux les comparer, nous les avons hiérarchisés en fonction de leur priorité et de leur criticité.


\subsection{Priorité}

\paragraph{} La priorité est un indicateur de l'ordre dans lequel nous devrons implémenter les besoins afin de satisfaire au mieux les exigences du client.

\paragraph{}
\begin{tabular}{| l | M{3cm} | M{9cm} |}
    \hline
    Valeur & Signification & Description \tabularnewline
    \hline
    1 & Priorité haute & A implémenter dans les premiers temps \tabularnewline
    \hline
    2 & Priorité moyenne & A implémenter  \tabularnewline
    \hline
    3 & Priorité faible & A implémenter (en fonction du temps restant)  \tabularnewline
    \hline
 \end{tabular}
 

\subsection{Criticité}

\paragraph{} Le niveau de criticité d'un besoin est un indicateur de l'impact qu'aura la non-implémentation de ce besoin sur le bon fonctionnement de l'application.

\paragraph{}
\begin{tabular}{| l | M{3cm} | M{9cm} |}
    \hline
    Valeur & Signification & Description \tabularnewline
    \hline
    1 & Criticité extrême & L'application ne fonctionnera pas  \tabularnewline
    \hline
    2 & Criticité haute & Certaines fonctionnalités de l'application ne fonctionneront pas  \tabularnewline
    \hline
    3 & Criticité moyenne & Certaines fonctionnalités seront perturbées  \tabularnewline
    \hline
    4 & Criticité faible & L'application fonctionnera correctement  \tabularnewline
    \hline
 \end{tabular}



\newpage

\section{Besoins fonctionnels}

\subsection{Gestion d'un réseau}

\paragraph{} Un réseau est un ensemble de noeuds qui sont reliés entre eux (par exemple par Internet) et qui communiquent ensemble afin de traiter toutes les requêtes reçues.


\subsubsection{Gestion des noeuds}

\paragraph{Création d'un noeud} \besoin{1}{1} Il est possible de séparer ce besoin en plusieurs sous-besoins :
 \begin{itemize}
 	\item créer un noeud dans l'environnement
 	\item initialiser les données locales d'un noeud
 \end{itemize}

\paragraph{Mise à jour des données locales} \besoin{1}{1} Afin de connaître l'état du réseau de manière précise, les données locales doivent être mise à jour à chaque action 
Une mise à jour a donc lieu lors du traitement d'un message dans la file d'attente.

\paragraph{Communication des données locales} \besoin{1}{1} Un noeud doit être capable de communiquer ses données locales à d'autres noeuds du réseau.

\paragraph{Récupération de l'état du réseau} \besoin{1}{1} L'application doit permettre la description de l'état du réseau.
On souhaite connaître : 
\begin{itemize}
 \item le nombre de requêtes en attente
 \item la popularité des objets
\end{itemize}

\subsubsection{Réplication d'un objet}
\paragraph{} Il s'agit de copier un objet sur un autre noeud.

%Schéma réplication avec fonction de hashage

%Explication du schéma

\paragraph{Définition des fonctions de hashage} \besoin{1}{3} %A completer


\subsubsection{Popularité d'un objet}

\paragraph{} Les algorithmes à implémenter nécessitent de connaître la popularité d'un objet dans le réseau.
La popularité d'un objet est fonction du nombre de requêtes sur cet objet. Plus ce nombre de requêtes est grand, plus l'objet est populaire.

\paragraph{Calcul de la popularité} \besoin{1}{1}

\paragraph{Stockage de la popularité} \besoin{1}{1} Chaque noeud stocke la popularité des objets qu'il contient.

\paragraph{Communication de la popularité} \besoin{1}{1} Un noeud stockant des replicats doit communiquer la popularité de ces derniers au noeud possédant l'objet original.


\subsection{Protocole de réaffectation}

\paragraph{} \besoin{1}{1} Les algorithmes d'équilibrage de charge à implémenter sont  \textbf{SLVO} et \textbf{AverageDegree}.


\subsubsection{Protocole de test}

\paragraph{} La conformité des algorithmes implémentés est assurée par un protocole de test suivant la démarche :

\begin{itemize}
	\item Définir un réseau $R$, un ensemble d'objets $O$ et un ensemble de requêtes $Q$
	\item Faire tourner l'algorithme à la main
	\item Stocker l'état final du réseau
	\item Faire valider ce processus par le client
	\item Exécuter l'algorithme avec $R$, $O$ et $Q$
	\item Vérifier les résultats constatés avec les résultats attendus
\end{itemize}
	
\paragraph{} S'il y a une différence entre les deux résultats, une vérification par le client peut être envisagée dans le cas de résultats \textit{presque} similaires. 
La notion de similitude est laissée à l'appréciation de l'équipe en charge du projet, lors de la vérification.



\subsection{Requêtes}

\subsubsection{Générations de requête}

\paragraph{} %A définir


\subsubsection{Importation d'un jeu de requête}

\paragraph{} Pour comparer l'efficacité des algorithmes, il doit être possible d'envoyer sur le réseau un même suite de requêtes, un jeu de requête.

\paragraph{Importation} \besoin{1}{2} L'application doit pouvoir lire un fichier contenant une suite de requête et envoyer ces requêtes sur le réseau.


\subsection{Visualisation des données}

\begin{itemize}
 \item Temps de réponse moyen sur les requêtes passées.
 \item Charge d'un noeud
 \item Popularité des objets
\end{itemize}


\newpage

\section{Besoins non fonctionnels}

\subsection{Cassandra}

\paragraph{} Cassandra est une base de données distribuée.
Nous créons notre environnement de simulation à partir de la dernière version stable, Cassandra.

\paragraph{} Le choix de cette solution nous a été fortement recommandé par le client.
En effet, celui-ci dispose de connaissances sur cette application et pourra donc plus facilement intervenir s'il souhaite faire évoluer le projet en implémentant par exemple de nouveaux algorithmes.



\subsection{Maintenabilité du code}

\paragraph{} Nous ne pensons pas que le projet sera totalement terminé le 8 Avril 2015, date de rendu du code et du mémoire.
Pour cela, nous avons défini quelques normes pour que le projet puisse être repris. (a détailler)

\paragraph{}



\subsection{Gestion d'un réseau}

\subsubsection{Communication entre noeuds}


\paragraph{Algorithme} Le calcul de la popularité nécessite l'implémentation de l'algorithme d'approximation Space-Saving Algorithm \cite{SpaceSaving}.

\paragraph{}Pour connaître l'état du réseau, il faut regrouper les données locales des noeuds.
Nous cherchons donc a récupérer ces données en un temps raisonnable ($O(log(n))$ pour $n$ noeuds).

\paragraph{}Pour cela, nous nous appuierons sur le protocole \texttt{Gossip} \cite{gossip}.
Périodiquement, chaque noeud choisi $n$ noeuds aléatoirement dont un noeud \textit{seed}, noeud en mesure d'avoir une connaissance globale du système, et il communique à ces noeuds ses statistiques (valeur de sa charge, objets les plus populaires...).

\paragraph{}Ainsi, la connaissance globale du système se fait en $O(log(n))$.


\subsubsection{Taille des données}

\paragraph{} La taille de chaque donnée est laissée à l'apréciation de l'équipe. Néanmoins, celle-ci doit être suffisamment importante, afin de permettre de créer des requêtes qui "stressent" le système pour avoir des résultats cohérents (sur la base de l'hypothèse : chaque requête prend un même temps à être traitée).


\subsection{Visualisation des données}

\paragraph{} Une vue correspond à une fenêtre de l'application, c'est à dire ce que voit l'utilisateur.


\subsubsection{Etat du réseau}

\paragraph{} La vue permet de montrer l'état du réseau.

\paragraph{} Le réseau est représenté par un graphe, les machines par des noeuds. 
Pour chaque machine, les données affichées sont la charge ainsi que le contenu de la file d'attente.


\subsubsection{Actualisation de la vue}

\paragraph{} L'état du réseau doit-être visible en temps réel.

\paragraph{} La vue peut donc être actualisée toutes les $0.5$ secondes. 
Un délai plus faible risquerait de la rendre invisible (données clignotantes sur l'écran).





\newpage
\section{Répartitions des tâches}

\subsection{Diagramme de Gantt}

\rotatebox{270}{
\begin{ganttchart}[
hgrid,
vgrid={*6{blue,dashed}, *1{red}},
inline = true,
x unit=4.5mm,
time slot format=isodate,
milestone inline label node/.append style={left=3mm},
y unit chart = 0.65cm,
bar top shift= 0.1,
bar height = 0.8
]{2015-02-16}{2015-04-08}
\gantttitlecalendar{month=name, day} \\

\ganttgroup{Gestion du réseau (A)}{2015-02-16}{2015-03-06} \\
\ganttbar[name=a1]{A1}{2015-02-16}{2015-02-23} \\ %Création noeuds via script ?
\ganttbar[name=a2]{A2}{2015-02-16}{2015-02-23} \\ %Implémentation et initialisations données noeuds
\ganttbar[name=a3]{A3}{2015-02-24}{2015-03-28} \\ %Communication entre noeuds
\ganttbar[name=a4]{A4}{2015-02-27}{2015-03-02} \\ %Gestion des replicats
\ganttbar{AT}{2015-03-03}{2015-03-06} \\ %Tests

\ganttgroup{Simulation de requête (B)}{2015-03-01}{2015-03-08} \\
\ganttbar{B1}{2015-03-01}{2015-03-06} \\ %Création d'un interpreteur pour lire un fichier jeu de requête
\ganttbar{BT}{2015-03-07}{2015-03-08} \\ %Tests

\ganttgroup{Gestion de la popularité (C)}{2015-03-07}{2015-03-16} \\
\ganttbar{C1}{2015-03-07}{2015-03-10} \\ %Calcul de la popularité pour un objet
\ganttbar{C2}{2015-03-07}{2015-03-10} \\ %Implémentation de SpaceSaving
\ganttbar{C3}{2015-03-10}{2015-03-14} \\ %Amélioration protocole Gossip
\ganttbar{CT}{2015-03-15}{2015-03-16} \\ %Tests


\ganttgroup{Equilibrage des charges (D)}{2015-03-15}{2015-03-29} \\
\ganttbar{D1}{2015-03-15}{2015-03-24} \\ %Algorithme SLVO
\ganttbar{D2}{2015-03-15}{2015-03-24} \\ %Algorithme AvergeDegree
\ganttbar{DT}{2015-03-25}{2015-03-29} \\ %Tests 

\ganttgroup{Visualisation de données (E)}{2015-03-29}{2015-04-08} \\
\ganttbar{E1}{2015-03-29}{2015-04-01} \\ %Prise en main tulip
\ganttbar{E2}{2015-04-01}{2015-04-04} \\ %Affichage réseau
\ganttbar{E3}{2015-04-04}{2015-04-06} \\ %AFfichage informations (charges)

\ganttbar{T}{2015-04-06}{2015-04-07} \\

\ganttmilestone{Livrable final}{2015-04-08} 

\end{ganttchart}
}



\newpage

\subsection{Affectation des tâches}

\paragraph{}
\begin{tabular}{| l | M{5cm} | M{3cm} | M{5.5cm} |}
    \hline
    Fct & Description & Développeur(s) & Commentaire \tabularnewline
    \hline
    A1 & Création des noeuds &  &   \tabularnewline
    \hline
    A2 & Données locales des noeuds &  & Initialisation et implémentation \tabularnewline
    \hline
    A3 & Communication entre noeuds &  &  \tabularnewline
    \hline
    A4 & Gestion des replicats &  &  \tabularnewline
    \hline
    AT & Tests groupe A &  &  Vérification, tests, mémoire \tabularnewline
    \hline 
    \hline
    B1 & Générateur de requêtes &  & A détailler  \tabularnewline
    \hline
    BT & Tests groupe B &  &  Vérification, tests, mémoire \tabularnewline
    \hline
    \hline
    C1 & Popularité objet sur noeud &  &  \tabularnewline
    \hline
    C2 & Space-Saving Algorithm &  &  \tabularnewline
    \hline
    C3 & Popularité d'un objet &  &  \tabularnewline
    \hline
    CT & Tests groupe C &  & Vérification, tests, mémoire \tabularnewline
    \hline
    \hline
    D1 & Implémentation SLVO &  &  \tabularnewline
    \hline
    D2 & Implémentation AverageDegree &  &  \tabularnewline
    \hline
    DT & Tests groupe D &  &  Avec client \tabularnewline
    \hline
    \hline
    E1 & Prise en main Tulip &  &  \tabularnewline
    \hline
    E2 & Représentation réseau &  &  \tabularnewline
    \hline
    E3 & Représentation données &  &  \tabularnewline
    \hline
    \hline
    T & Tests finaux &  &  Vérification, tests, mémoire \tabularnewline
    \hline
 \end{tabular}
 


\newpage

\section{Livrables}

\subsection{Livrable ``final''}

\paragraph{} Il devra être remis le 8 Avril 2015.

\include{user_scenario}

\bibliography{identifications_besoins}

\end{document}
